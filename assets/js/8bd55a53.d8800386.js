"use strict";(self.webpackChunkgetdeck=self.webpackChunkgetdeck||[]).push([[310],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var i=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=i.createContext({}),s=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=s(e.components);return i.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},b=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),b=s(n),d=o,k=b["".concat(c,".").concat(d)]||b[d]||u[d]||r;return n?i.createElement(k,a(a({ref:t},p),{},{components:n})):i.createElement(k,a({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var s=2;s<r;s++)a[s]=n[s];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}b.displayName="MDXCreateElement"},5794:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var i=n(7462),o=(n(7294),n(3905));const r={title:"Beiboot Client",sidebar_position:4,description:"Options for Beiboot to be used from a client"},a=void 0,l={unversionedId:"client",id:"client",title:"Beiboot Client",description:"Options for Beiboot to be used from a client",source:"@site/beiboot/client.md",sourceDirName:".",slug:"/client",permalink:"/beiboot/client",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Beiboot Client",sidebar_position:4,description:"Options for Beiboot to be used from a client"},sidebar:"docsSidebar",previous:{title:"Install Beiboot Operator",permalink:"/beiboot/installation/cluster"},next:{title:"Configuration",permalink:"/beiboot/configuration"}},c={},s=[{value:"Using <code>deck</code> CLI With Provider <code>beiboot</code>",id:"using-deck-cli-with-provider-beiboot",level:2},{value:"Working with <code>kubectl</code>",id:"working-with-kubectl",level:2},{value:"Creating a Logical Kubernetes Cluster",id:"creating-a-logical-kubernetes-cluster",level:3},{value:"Deleting a Logical Kubernetes Cluster",id:"deleting-a-logical-kubernetes-cluster",level:3},{value:"Beiboot Python Client",id:"beiboot-python-client",level:2},{value:"Task Overview",id:"task-overview",level:3},{value:"Client Architecture",id:"client-architecture",level:3}],p={toc:s};function u(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,i.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"There are a couple of options available to work with Beiboot clusters:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Using the ",(0,o.kt)("inlineCode",{parentName:"li"},"deck")," CLI with a ",(0,o.kt)("inlineCode",{parentName:"li"},"beiboot")," provider "),(0,o.kt)("li",{parentName:"ol"},"Using ",(0,o.kt)("inlineCode",{parentName:"li"},"beibootctl")," to manage Beiboot clusters and connect to them"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/Getdeck/beiboot-api"},"A REST API")," and a ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/Getdeck/beiboot-desktop"},"Desktop application")," (both are currently in the making)"),(0,o.kt)("li",{parentName:"ol"},"Working with ",(0,o.kt)("inlineCode",{parentName:"li"},"kubectl")," directly (just creating and deleting ",(0,o.kt)("em",{parentName:"li"},"beiboot")," objects)"),(0,o.kt)("li",{parentName:"ol"},"Using the Python client")),(0,o.kt)("h2",{id:"using-deck-cli-with-provider-beiboot"},"Using ",(0,o.kt)("inlineCode",{parentName:"h2"},"deck")," CLI With Provider ",(0,o.kt)("inlineCode",{parentName:"h2"},"beiboot")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"deck")," CLI from version ",(0,o.kt)("strong",{parentName:"p"},"0.9.0+")," integrated Beiboot as ",(0,o.kt)("a",{parentName:"p",href:"/docs/deckfile-specs/#provider"},"supported cluster provider"),".\nA ",(0,o.kt)("a",{parentName:"p",href:"/docs/deckfile-specs/"},"Deckfile")," specifying the host cluster and port-mapping is required, too. Please read on\n",(0,o.kt)("a",{parentName:"p",href:"/beiboot/configuration/#usage"},"how to write a Deckfile using Beiboot"),"."),(0,o.kt)("h2",{id:"working-with-kubectl"},"Working with ",(0,o.kt)("inlineCode",{parentName:"h2"},"kubectl")),(0,o.kt)("h3",{id:"creating-a-logical-kubernetes-cluster"},"Creating a Logical Kubernetes Cluster"),(0,o.kt)("p",null,"Creating a logical Kubernetes cluster using Beiboot is very easy:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cat <<EOF | kubectl apply -f -\napiVersion: getdeck.dev/v1\nkind: beiboot\nmetadata:\n  name: cluster-1\n  namespace: getdeck\nprovider: k3s\nEOF\n")),(0,o.kt)("p",null,"It creates an object of type ",(0,o.kt)("em",{parentName:"p"},"beiboot"),". Required fields are ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," (unique) and ",(0,o.kt)("inlineCode",{parentName:"p"},"provider")," (currently only ",(0,o.kt)("em",{parentName:"p"},"k3s")," is supported)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"> kubectl -n getdeck get bbt \nNAME        AGE\ncluster-1   1m22s\n")),(0,o.kt)("p",null,"The cluster is going to be created in namespace ",(0,o.kt)("inlineCode",{parentName:"p"},"getdeck-bbt-cluster-1")," (with default prefix ",(0,o.kt)("em",{parentName:"p"},"getdeck-bbt"),") of the host cluster.\nOnce the cluster is ready you can retrieve the ",(0,o.kt)("em",{parentName:"p"},"kubeconfig")," from the ",(0,o.kt)("em",{parentName:"p"},"beiboot")," object running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl -n getdeck get bbt cluster-1 --no-headers -o=custom-columns=:.kubeconfig.source | base64 -d > cluster-1.yaml\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Important:")," Please note that this ",(0,o.kt)("em",{parentName:"p"},"kubeconfig")," specifies the server to be reachable at ",(0,o.kt)("em",{parentName:"p"},(0,o.kt)("a",{parentName:"em",href:"https://127.0.0.1:6443"},"https://127.0.0.1:6443")),".\nTo reach this logical Kubernetes cluster you have to set up a ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl port-forward")," on your local machine."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl port-forward -n getdeck-bbt-cluster-1 svc/kubeapi 6443:6443\n")),(0,o.kt)("p",null,"Now, in a different terminal, you can set ",(0,o.kt)("inlineCode",{parentName:"p"},"export KUBECONFIG=<path>/cluster-1.yaml")," and you are ready to go. In this terminal session, you can now use ",(0,o.kt)("em",{parentName:"p"},"kubectl")," just as usual."),(0,o.kt)("h3",{id:"deleting-a-logical-kubernetes-cluster"},"Deleting a Logical Kubernetes Cluster"),(0,o.kt)("p",null,"If you wish to remove the logical Kubernetes cluster, please type:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl -n getdeck delete bbt cluster-1\n")),(0,o.kt)("p",null,"and the entire namespace in the host cluster will be gone in a matter of seconds."),(0,o.kt)("h2",{id:"beiboot-python-client"},"Beiboot Python Client"),(0,o.kt)("h3",{id:"task-overview"},"Task Overview"),(0,o.kt)("p",null,"Beiboot comes with a dedicated Python package that handles the following client processes:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"ordering a new Beiboot cluster (with arguments)"),(0,o.kt)("li",{parentName:"ul"},"deleting an existing Beiboot cluter"),(0,o.kt)("li",{parentName:"ul"},"downloading the ",(0,o.kt)("em",{parentName:"li"},"kubeconfig")," and saving it to ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.getdeck/<cluster-name>.yaml")),(0,o.kt)("li",{parentName:"ul"},"setting up the local proxy to access the Beiboot cluster"),(0,o.kt)("li",{parentName:"ul"},"keeping the cluster alive by sending a heartbeat")),(0,o.kt)("p",null,"Please find the Python package on ",(0,o.kt)("em",{parentName:"p"},"pypi.org")," ",(0,o.kt)("a",{parentName:"p",href:"https://pypi.org/project/beiboot/"},"https://pypi.org/project/beiboot/"),".",(0,o.kt)("br",{parentName:"p"}),"\n","You can install it with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pip install beiboot\n")),(0,o.kt)("p",null,"The Python client is released with every release of Beiboot."),(0,o.kt)("h3",{id:"client-architecture"},"Client Architecture"),(0,o.kt)("p",null,"The Beiboot operator handles all cluster-side components to run a logical Kubernetes cluster. Yet, for users to connect\nto it a certain amount of client-side process logic is required."),(0,o.kt)("p",null,"The Beiboot client manages the following components on the users machine:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"creating a ",(0,o.kt)("inlineCode",{parentName:"li"},"beiboot")," object (a Kubernetes extension) to request a Beiboot cluster"),(0,o.kt)("li",{parentName:"ul"},"watching this object until the Beiboot operator updates it with the _",(0,o.kt)("em",{parentName:"li"},"kubeconfig")," (a YAML-file)"),(0,o.kt)("li",{parentName:"ul"},"storing the ",(0,o.kt)("em",{parentName:"li"},"kubeconfig")," on the local machine so the user can be use it (for instance by setting ",(0,o.kt)("inlineCode",{parentName:"li"},"export KUBECONFIG=..."),")"),(0,o.kt)("li",{parentName:"ul"},"establishing a ",(0,o.kt)("inlineCode",{parentName:"li"},"kubectl port-forward")," for every requested port-mapping in a Docker process")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Getdeck Beiboot client",src:n(528).Z,width:"1017",height:"871"})),(0,o.kt)("p",null,"The Beiboot client allows reconnecting to an existing cluster by fetching the ",(0,o.kt)("em",{parentName:"p"},"kubeconfig")," again and setting up the\nlocal proxy facilities.  "),(0,o.kt)("p",null,"Once the Beiboot cluster is not needed anymore, client removes the ",(0,o.kt)("inlineCode",{parentName:"p"},"beiboot")," object in Kubernetes. Running proxies are\nremoved, too."))}u.isMDXComponent=!0},528:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/beiboot-client-9dea20830691b3e268653d5d2cccd0c0.png"}}]);